{% extends "::base.html.twig" %}

{% block mainContent %}
    {% stylesheets  filter='cssrewrite' 
 'bundles/pages/css/jquery.dataTables.min.css'

    %}
    <link rel="stylesheet" href="{{ asset_url }}" />
    {% endstylesheets %}
    <div class="" >

        <!-- start: PAGE CONTENT -->
        <div class="row">
            <div class="col-md-12">
                <!-- start: DYNAMIC TABLE PANEL -->
                <div class="panel panel-white">
                    <div class="panel-heading">

                        <div class="panel-heading">
                            <h3>{% trans %}Opportunities list{% endtrans %}</h3>
                            <hr>

                        </div>
                    </div>
                    <div class="panel-body">

                        <div class="col-md-12 space20">
                            <a class="btn btn-success add-row" href="{{path('opportunity/new')}}">
                                {% trans %}Add{% endtrans %} <i class="fa fa-plus"></i>
                            </a>
                        </div>
                        <table class="table table-striped table-hover table-full-width display"  cellspacing="0" width="100%" id="myTable">
                            <thead>
                                <tr>
                                    <th>{% trans %}Name{% endtrans %}</th>                               
                                    <th class="hidden-xs">{% trans %}Company{% endtrans %}</th>
                                    <th class="hidden-xs">{% trans %}Statut{% endtrans %}</th>
                                    <th class="hidden-xs">{% trans %}Potentiel Margin{% endtrans %}</th>                                        
                                    <th>{% trans %}Open date{% endtrans %}</th>                                                                         
                                    <th></th>


                                </tr>
                            </thead>
                            <tbody>
                                {% for opportunity in opportunities %}
                                    <tr>
                                        <td >
                                            {{opportunity.name }}
                                        </td>                      
                                        <td class="hidden-xs" >{{opportunity.entity}}</td>                                                                                    </td>
                                        <td class="hidden-xs">  
                                            {% if opportunity.statut =="ouvert" %}                            
                                                <span class="label label-sm label-warning">{% trans %}ouvert{% endtrans %}</span>
                                            {% elseif  opportunity.statut =="clôturé - perdu" %}
                                                <span class="label label-sm label-danger">{% trans %}clôturé - perdu{% endtrans %}</span>
                                            {% else %}
                                                <span class="label label-sm label-success">{% trans %}clôturé - gagné{% endtrans %}</span>
                                            {% endif %}
                                        </td>

                                        <td>{{ opportunity.margin }}</td>
                                        <td>{{ opportunity.openDate |date("Y-m-d H:i")}}</td>



                                        <td class="center">
                                            <div class="visible-md visible-lg hidden-sm hidden-xs">
                                                <a href="" class="btn btn-xs btn-info tooltips" data-placement="top" data-original-title="{% trans %}Edit{% endtrans %}"><i class="fa fa-edit"></i></a>
                                                <a href="" class="btn btn-xs btn-success tooltips" data-placement="top" data-original-title="{% trans %}Show{% endtrans %}"><i class="fa fa-share"></i></a>
                                                <a href="{{ path('opportunity/delete', {'id': opportunity.id}) }}" class="btn btn-xs btn-danger tooltips" data-placement="top" data-original-title="{% trans %}Remove{% endtrans %}" ><i class="fa fa-times fa fa-white"></i></a>
                                            </div>
                                            <div class="visible-xs visible-sm hidden-md hidden-lg">
                                                <div class="btn-group">
                                                    <a class="btn btn-green dropdown-toggle btn-sm" data-toggle="dropdown" href="#">
                                                        <i class="fa fa-cog"></i> <span class="caret"></span>
                                                    </a>
                                                    <ul role="menu" class="dropdown-menu pull-right dropdown-dark">
                                                        <li>
                                                            <a role="menuitem" tabindex="-1" href="">
                                                                <i class="fa fa-edit"></i> {% trans %}Edit{% endtrans %}
                                                            </a>
                                                        </li>
                                                        <li>
                                                            <a role="menuitem" tabindex="-1" href="">
                                                                <i class="fa fa-share"></i> {% trans %}Show{% endtrans %}
                                                            </a>
                                                        </li>
                                                        <li>
                                                            <a role="menuitem" tabindex="-1" href="{{ path('opportunity/delete', {'id': opportunity.id}) }}">
                                                                <i class="fa fa-times"></i> {% trans %}Remove{% endtrans %}
                                                            </a>
                                                        </li>
                                                    </ul>
                                                </div>
                                            </div>
                                        </td>

                                    </tr>

                                {% endfor %}


                            </tbody>
                        </table>

                    </div>
                </div>
                <!-- end: DYNAMIC TABLE PANEL -->
            </div>
        </div>

        <!-- end: PAGE CONTENT-->

     
    </div>

    {% javascripts 
          'bundles/pages/js/jquery-1.11.3.min.js' 
 'bundles/pages/css/bootstrap/js/bootstrap.min.js' 
         'bundles/pages/js/jquery.dataTables.min.js'    
         
    %}

  
    <script type="text/javascript" src="{{ asset_url }}"></script>

    {% endjavascripts %}
  <script>
        $(document).ready(function () {
           $('#myTable').dataTable();
        });
        </script>
{%endblock%}